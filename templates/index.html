<!DOCTYPE html>
<html lang="pt-br">
<head>
    <title>Criador de currículo</title>
    <meta charset=" UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Bootstrap CDN -->
    <link rel="stylesheet" href="../static/css/bootstrap.min.css"/>
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
    <!-- JQuery CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>

<!-- Navbar-->
<body class="overflow-hidden">
<div class="container">
    <section class="container" style="padding-top: 72px">
        <nav class="navbar fixed-top navbar-expand-lg bg-primary" data-bs-theme="dark">
            <div class="container-fluid">
                <a class="navbar-brand" href="/"> CV Builder </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarColor01"
                        aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="navbar-collapse collapse" id="navbarColor01">
                    <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                        {% if not usuario %}
                            <li class="nav-item">
                                <a class="nav-link btn" data-bs-toggle="modal" data-bs-target="#loginModal">
                                    <i class="fa-solid fa-right-to-bracket"></i> Login</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link btn" data-bs-toggle="modal" data-bs-target="#registerModal">
                                    <i class="fa-solid fa-address-card"></i> Registrar</a
                                >
                            </li>
                        {% elif usuario %}
                            <li class="nav-item">
                                <a class="nav-link" href="/logout">Logout</a>
                            </li>
                        {% endif %}
                    </ul>
                </div>
            </div>
        </nav>
    </section>
    <!-- Navbar-->

    <!-- Conteúdo -->

    {% if not usuario %}
        <section class="container">
            <div class="row">
                <div class="col col-6">
                    <div class="mt-5">
                        <h1> Olá, seja bem vindo :) </h1>
                        <p> Crie um currículo profissional em poucos minutos. </p>

                        <p> Você pode personalizar o seu currículo e adicionar informações pessoais, formação
                            acadêmica,
                            experiência profissional e habilidades. </p>
                        <p> Com dificuldades para escrever o seu objetivo profissional? Utilize o nosso ChatGPT para
                            te ajudar! </p>
                        <p> Bastar clicar no ícone do robô no campo objetivo e digitar o seu título profissional. </p>
                        <p> Clique no botão abaixo para se registrar ou fazer login. </p>

                        <button class="btn btn-primary btn-xl" data-bs-toggle="modal" data-bs-target="#registerModal">
                            Registrar
                        </button>
                        <button class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#loginModal">
                            Login
                        </button>

                    </div>
                </div>

                <div class="col col-6">
                    <img src="../static/images/unsplash-image.jpg" class="img-fluid" alt="Currículo"/>
                </div>
            </div>
        </section>
    {% endif %}


    {% if usuario %}
        <section class="container">
            <div class="row">
                <!-- Lado esquerdo -->
                <div class="col col-6" style="height: 100vh; overflow-y: auto">
                    <div>
                        <div class="mt-3">
                            <h4>Customização</h4>
                            <div class="mt-3">
                                <form method="post" action="{{ url_for('customizacao', tipo = 'color') }}">
                                    <label>Cores : </label>
                                    <div class="row row-cols-6 m-auto justify-content-between">
                                        <button class="btn btn-lg col" name="color" type="submit"
                                                style="background-color: rgb(248, 113, 113)" value="#f87171"></button>
                                        <button class="btn btn-lg col" name="color" type="submit"
                                                style="background-color: rgb(239, 68, 68)" value="#ef4444"></button>
                                        <button class="btn btn-lg col" name="color" type="submit"
                                                style="background-color: rgb(251, 146, 60)" value="#fbb23c"></button>
                                        <button class="btn btn-lg col" name="color" type="submit"
                                                style="background-color: rgb(249, 115, 22)" value="#f97316"></button>
                                        <button class="btn btn-lg col" name="color" type="submit"
                                                style="background-color: rgb(245, 158, 11)" value="#f59e0b"></button>
                                        <button class="btn btn-lg col" name="color" type="submit"
                                                style="background-color: rgb(251, 191, 36)" value="#fbbf24"></button>
                                        <button class="btn btn-lg col" name="color" type="submit"
                                                style="background-color: rgb(34, 197, 94)" value="#22c55e"></button>
                                        <button class="btn btn-lg col" name="color" type="submit"
                                                style="background-color: rgb(21, 128, 61)" value="#15803d"></button>
                                        <button class="btn btn-lg col" name="color" type="submit"
                                                style="background-color: rgb(56, 189, 248)" value="#38bdf8"></button>
                                        <button class="btn btn-lg col" name="color" type="submit"
                                                style="background-color: rgb(14, 165, 233)" value="#0ea5e9"></button>
                                        <button class="btn btn-lg col" name="color" type="submit"
                                                style="background-color: rgb(129, 140, 248)" value="#818cf8"></button>
                                        <button class="btn btn-lg col" name="color" type="submit"
                                                style="background-color: rgb(99, 102, 241)" value="#6366f1"></button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="mt-3">
                            <form method="post" action="{{ url_for('customizacao', tipo = 'font') }}">
                                <label>Fontes :</label>
                                <div class="row row-cols-2">
                                    <button class="btn col" type="submit" style="font-family: 'Arial', sans-serif"
                                            name="font" value="Arial, sans-serif">Arial
                                    </button>
                                    <button class="btn col" type="submit" style="font-family: 'Verdana', sans-serif"
                                            name="font" value="Verdana, sans-serif">Verdana
                                    </button>
                                    <button class="btn col" type="submit" style="font-family: 'Tahoma', sans-serif"
                                            name="font" value="Tahoma, sans-serif">Tahoma
                                    </button>
                                    <button class="btn col" type="submit"
                                            style="font-family: 'Trebuchet MS', sans-serif" name="font"
                                            value="Trebuchet MS, sans-serif">Trebuchet MS
                                    </button>
                                    <button class="btn col" type="submit" style="font-family: 'Georgia', serif"
                                            name="font" value="Georgia, serif">Georgia
                                    </button>
                                    <button class="btn col" type="submit" style="font-family: 'Times New Roman', serif"
                                            name="font" value="Times New Roman, serif">Times New Roman
                                    </button>
                                    <button class="btn col" type="submit" style="font-family: 'Courier New', monospace"
                                            name="font" value="Courier New, monospace">Courier New
                                    </button>
                                    <button class="btn col" type="submit"
                                            style="font-family: 'Lucida Console', monospace" name="font"
                                            value="Lucida Console, monospace">Lucida Console
                                    </button>
                                </div>
                            </form>
                        </div>
                        <div class="mt-3">
                            <form method="post" action="{{ url_for('customizacao', tipo = 'size') }}">
                                <label> Tamanho da fonte :</label>
                                <div class="row m-auto justify-content-around">
                                    <button class="btn btn-lg col" type="submit" style="font-size: 12px"
                                            name="size" value="12px">Pequeno
                                    </button>
                                    <button class="btn btn-lg col" type="submit" style="font-size: 16px"
                                            name="size" value="16px">Medio
                                    </button>
                                    <button class="btn btn-lg col" type="submit" style="font-size: 20px"
                                            name="size" value="20px">Grande
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <form method="post" action="{{ url_for('reset_customizacao') }} ">
                        <button class="btn btn-primary mt-3" href="/reset_customizacao" type="submit">Limpar</button>
                    </form>

                    <!-- Dados pessoais -->
                    <div class="mt-3">
                        <h4> Dados pessoais </h4>

                        <form action="{{ url_for('dadospessoais') }}" method="post">
                            <div class="">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" name="nome" placeholder="Nome"
                                           value="{{ curriculo.dadospessoais.nome if curriculo.dadospessoais else '' }}">
                                    <label> Nome </label>
                                </div>

                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="floatingInput" name="titulo"
                                           placeholder="Título Profissional"
                                           value="{{ curriculo.dadospessoais.titulo if curriculo.dadospessoais else '' }}">
                                    <label for="floatingInput"> Título Profissional</label>
                                </div>

                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="floatingInput" name="endereco"
                                           placeholder="Endereço"
                                           value="{{ curriculo.dadospessoais.endereco if curriculo.dadospessoais else '' }}">
                                    <label for="floatingInput"> Endereço</label>
                                </div>

                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="floatingInput" name="site"
                                           placeholder="Site pessoal ou LinkedIn"
                                           value="{{ curriculo.dadospessoais.site if curriculo.dadospessoais else '' }}">
                                    <label for="floatingInput">Site pessoal</label>
                                </div>

                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="floatingInput" name="telefone"
                                           placeholder="Telefone"
                                           value="{{ curriculo.dadospessoais.telefone if curriculo.dadospessoais else '' }}">
                                    <label for="floatingInput">Telefone </label>
                                </div>

                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="floatingInput" name="email"
                                           placeholder="Email"
                                           value="{{ curriculo.dadospessoais.email if curriculo.dadospessoais else '' }}">
                                    <label for="floatingInput"> Email</label>
                                </div>

                                <div class="form-floating mb-3">
                                    <button class="btn btn-primary" type="button"
                                            style="position: absolute; bottom: 0; right: 0;" onclick="chatgpt()"><i
                                            class="fa-solid fa-robot"></i></button>
                                    <textarea class="form-control" style="height: 120px;" id="objetivo" rows="5"
                                              name="objetivo">{{ curriculo.dadospessoais.objetivo if curriculo.dadospessoais else '' }}</textarea>
                                    <label for="floatingInput" class="form-label"> Objetivo </label>
                                </div>

                            </div>
                            <button class="btn btn-primary mt-3"> Salvar</button>

                        </form>
                    </div>
                    <!-- Dados pessoais -->

                    <!-- Formação acadêmica -->
                    <div class="mt-2">
                        <h4> Formação Acadêmica </h4>

                        {% for form in curriculo.formacao %}
                            <div class="card mt-3">
                                <div class="card-body">
                                    <p class="visually-hidden">{{ form.id }}</p>
                                    <h5 class="card-title mb-2">{{ form.curso }}</h5>
                                    <h6 class="card-subtitle mb-2 text-muted">{{ form.instituicao }}</h6>
                                    <p class="card-text">{{ form.data }}</p>
                                    <p class="card-text">{{ form.descricao }}</p>
                                    <a onclick="showForm('formacao'), editarFormacao('{{ form.curso }}', '{{ form.instituicao }}', '{{ form.data }}', '{{ form.descricao }}', '{{ form.id }}')"
                                       class="card-link"> Editar</a>
                                    <a href="{{ url_for('delete_formacao', id = form.id) }}"
                                       class="card-link">Excluir</a>
                                </div>
                            </div>
                        {% endfor %}

                        <form class="mt-3" action="{{ url_for('formacao') }}" method="post" id="formacao_form"
                              style="display: none;">

                            <hr class="mt-3">
                            <p> Digite as informações da formação acadêmica :</p>

                            <input type="hidden" id="for_id" name="id">

                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="for_curso" name="curso" placeholder="Curso">
                                <label for="floatingInput"> Curso</label>
                            </div>

                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="for_instituicao" name="instituicao"
                                       placeholder="Instituição">
                                <label for="floatingInput"> Instituição</label>
                            </div>

                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="for_data" name="data" placeholder="Data">
                                <label for="floatingInput"> Data </label>
                            </div>

                            <div>
                                <label for="floatingInput" class="form-label mt-4"> Descrição </label>
                                <textarea class="form-control" id="for_descricao" rows="3" name="descricao"></textarea>
                            </div>

                            <button type="button" class="btn btn-secondary mt-3" onclick="closeForm('formacao')">
                                Fechar
                            </button>
                            <button class="btn btn-primary mt-3"> Salvar</button>
                        </form>

                        <div class="py-3" id="addForButton" style="display: block;">
                            <button class="btn btn-success" onclick="showForm('formacao')"><i
                                    class="fa-solid fa-plus"> </i> Adicionar Formação Acadêmica
                            </button>
                        </div>
                    </div>
                    <!-- Formação acadêmica -->

                    <!-- Experiência profissional -->
                    <div class="mt-2">
                        <h4> Experiência Profissional </h4>

                        {% for exp in curriculo.experiencia %}
                            <div class="card mt-3">
                                <div class="card-body">
                                    <p class="visually-hidden">{{ exp.id }}</p>
                                    <h5 class="card-title">{{ exp.cargo }}</h5>
                                    <h6 class="card-subtitle mb-2 text-muted">{{ exp.empresa }}</h6>
                                    <p class="card-text">{{ exp.data }}</p>
                                    <p class="card-text">{{ exp.descricao }}</p>
                                    <a onclick="showForm('experiencia'), editarExperiencia('{{ exp.cargo }}', '{{ exp.empresa }}', '{{ exp.data }}', '{{ exp.descricao }}', '{{ exp.id }}')"
                                       class="card-link"> Editar </a>
                                    <a href="{{ url_for('delete_experiencia', id = exp.id) }}"
                                       class="card-link">Excluir</a>
                                </div>
                            </div>
                        {% endfor %}

                        <form class="mt-3" action="{{ url_for('experiencia') }}" method="post" id="experiencia_form"
                              style="display: none;">
                            <hr class="mt-3">
                            <p> Digite as informações da experiência profissional :</p>

                            <input type="hidden" id="exp_id" name="id">

                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="exp_cargo" name="cargo" placeholder="Cargo">
                                <label for="floatingInput"> Cargo</label>
                            </div>

                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="exp_empresa" name="empresa"
                                       placeholder="Empresa">
                                <label for="floatingInput"> Empresa</label>
                            </div>

                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="exp_data" name="data"
                                       placeholder="Data">
                                <label for="floatingInput"> Data </label>
                            </div>

                            <div>
                                <label for="floatingInput" class="form-label mt-4"> Descrição </label>
                                <textarea class="form-control" id="exp_descricao" rows="3" name="descricao"></textarea>
                            </div>

                            <button type="button" class="btn btn-secondary mt-3" onclick="closeForm('experiencia')">
                                Fechar
                            </button>
                            <button class="btn btn-primary mt-3"> Salvar</button>
                        </form>

                        <div class="py-3" id="addExpButton" style="display: block;">
                            <button class="btn btn-success" onclick="showForm('experiencia')"><i
                                    class="fa-solid fa-plus"></i>
                                Adicionar Experiência
                            </button>
                        </div>
                    </div>
                    <!-- Experiência profissional -->

                    <!-- Habilidades -->
                    <div class="mt-2 mb-5">
                        <h4> Habilidades </h4>

                        <div class="d-flex justify-content-start row row-cols-4 py-1 px-1">
                            {% for hab in curriculo.habilidade %}
                                <div class="py-1 px-1">
                                    <div class="col align-items-center card ">
                                        <p class="mb-0">{{ hab.nome }}</p>
                                        <a href="{{ url_for('delete_habilidade', id = hab.id) }}" class="">Excluir</a>
                                        <p class="visually-hidden">{{ hab.id }}</p>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                        <div class="pb-5">
                            <form class="mt-3" action="{{ url_for('add_habilidade') }}" method="post">
                                <p> Digite uma nova habilidade :</p>

                                <div class="row row-cols-2 pb-5">
                                    <div class="col col-8">
                                        <input type="text" class="form-control" id="hab_nome" name="nome"
                                               placeholder="Habilidade">
                                    </div>

                                    <div class="col col-4">
                                        <button class="btn btn-primary "><i class="fa-solid fa-plus"></i> Adicionar
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- Habilidades -->

                <!-- Lado direito -->
                <div class="col col-6">
                    <div class="py-4">
                        <div class="row mt-4">
                            <a href="#" onclick="printCurriculo()"><i class="fa-solid fa-print"></i> Imprimir</a>

                        </div>
                    </div>
                    <iframe id="frame" class="shadow overflow-y-auto" src="/curriculo" width="100%"
                            height="80%"></iframe>
                </div>
                <!-- Lado direito -->
            </div>
        </section>
    {% endif %}
</div>
<!-- Conteúdo -->

<!-- Modal Login -->
<div class="modal" id="loginModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Faça o login</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true"></span>
                </button>
            </div>
            <div class="modal-body">
                <form action="{{ url_for('login') }}" method="post">
                    <!-- Email input -->
                    <div class="form-outline mb-4">
                        <label class="form-label" for="email">Endereço de Email</label>
                        <input type="email" id="email" name="email" class="form-control"/>
                    </div>

                    <!-- Password input -->
                    <div class="form-outline mb-4">
                        <label class="form-label" for="senha">Senha</label>
                        <input type="password" id="senha" name="senha" class="form-control"/>
                    </div>


                    <div class="py-2">
                        <!-- Submit button -->
                        <button type="submit" class="btn btn-primary btn-block">Login</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- Modal Login -->

<!-- Modal Cadastro -->
<div class="modal" id="registerModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Registrar um novo usuário</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true"></span>
                </button>
            </div>
            <div class="modal-body">
                <form action="{{ url_for('register') }}" method="post">
                    <!-- Email input -->
                    <div class="form-outline mb-4">
                        <label class="form-label" for="email">Endereço de Email</label>
                        <input type="email" id="email" name="email" class="form-control"/>
                    </div>

                    <!-- Password input -->
                    <div class="form-outline mb-4">
                        <label class="form-label" for="senha">Senha</label>
                        <input type="password" id="senha" name="senha" class="form-control"/>
                    </div>


                    <!-- Campo requisitos senha -->
                    <div class="card border-info">
                        <div class="card-body">
                            <small class="text-muted">
                                Sua senha deve ter mais de 8 caracteres, conter letras maiúsculas e minúsculas, um
                                número e
                                um
                                caractere especial.
                            </small>
                        </div>
                    </div>


                    <!-- Submit button -->
                    <div class="py-2">
                        <button type="submit" class="btn btn-primary btn-block">Registrar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- Modal Cadastro -->

<!-- Modal ChatGPT -->
<div class="modal" id="chatgptModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">ChatGPT</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true"></span>
                </button>
            </div>
            <div class="modal-body">
                <div>
                    <p> Olá! Eu sou o ChatGPT, um assistente de texto que pode te ajudar a escrever o seu objetivo
                        profissional. </p>
                    <p> É muito simples ! Digite seu título profissional e eu irei gerar um texto para você.</p>
                </div>

                <div class="row">
                    <div class="mb-3 col col-9">
                        <input type="text" class="form-control" id="tituloProfissional"
                               placeholder="Digite seu título profissional">
                    </div>
                    <div class="col col-3 align-self-auto">
                        <button class="btn btn-primary" id="btnGerar"><i class="fa-solid fa-robot"></i> Gerar</button>
                    </div>
                </div>
                <div class="mt-2">
                    <p>Resultado:</p>
                    <div id="tituloResposta"></div>
                </div>

            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-success" id="btnAceitar" data-bs-dismiss="modal">Aceitar</button>
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal" onclick="clearFields()">Fechar
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Mensagem de alerta -->
{% if mensagem %}
    <div id="autoCloseAlert" class="alert alert-dismissible alert-{{ tipo }} position-fixed bottom-0 end-0 mb-3 me-3"
         style="z-index: 9999;">
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        {{ mensagem }}
    </div>
{% endif %}
<!-- Mensagem de alerta -->

<!-- Mensagem de alerta via Flash -->
{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            <div id="autoCloseAlert"
                 class="alert alert-dismissible alert-{{ category }} position-fixed bottom-0 end-0 mb-3 me-3"
                 style="z-index: 9999;">
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
{% endwith %}


<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Javascript -->
<script>

    // Auto close alert
    window.onload = function () {
        setTimeout(function () {
            const alertElement = document.getElementById('autoCloseAlert');
            const bsAlert = new bootstrap.Alert(alertElement);
            bsAlert.close();
        }, 5000); // close the alert after 5000 milliseconds (5 seconds)
    };

    // Edita a experiência
    function editarExperiencia(cargo, empresa, data, descricao, id) {
        document.getElementById('exp_cargo').value = cargo;
        document.getElementById('exp_empresa').value = empresa;
        document.getElementById('exp_data').value = data;
        document.getElementById('exp_descricao').value = descricao;
        document.getElementById('exp_id').value = id;
    }

    // Edita a formação
    function editarFormacao(curso, instituicao, data, descricao, id) {
        document.getElementById('for_curso').value = curso;
        document.getElementById('for_instituicao').value = instituicao;
        document.getElementById('for_data').value = data;
        document.getElementById('for_descricao').value = descricao;
        document.getElementById('for_id').value = id;
    }

    // Mostra o formulários
    function showForm(id) {
        if (id == 'experiencia') {
            document.getElementById('experiencia_form').style.display = 'block';
            document.getElementById('addExpButton').style.display = 'none';

        } else if (id == 'formacao') {
            document.getElementById('formacao_form').style.display = 'block';
            document.getElementById('addForButton').style.display = 'none';
        }
    }

    // Fecha o formulário
    function closeForm(id) {
        if (id == 'experiencia') {
            document.getElementById('experiencia_form').style.display = 'none';
            document.getElementById('addExpButton').style.display = 'block';
        } else if (id == 'formacao') {
            document.getElementById('formacao_form').style.display = 'none';
            document.getElementById('addForButton').style.display = 'block';
        }

        clearFields();
    }

    // Limpa os campos
    function clearFields() {
        document.getElementById('exp_cargo').value = '';
        document.getElementById('exp_empresa').value = '';
        document.getElementById('exp_data').value = '';
        document.getElementById('exp_descricao').value = '';
        document.getElementById('exp_id').value = '';

        document.getElementById('for_curso').value = '';
        document.getElementById('for_instituicao').value = '';
        document.getElementById('for_data').value = '';
        document.getElementById('for_descricao').value = '';
        document.getElementById('for_id').value = '';

        // Limpa o campo do ChatGPT
        document.getElementsByName('campoChatGPT').forEach((element) => {
            element.value = '';
        });
    }

    // Imprime o currículo
    function printCurriculo() {
        var iframe = document.querySelector('iframe');
        iframe.contentWindow.print();
    }

    // ChatGPT Modal
    function chatgpt() {
        var chatgpt = new bootstrap.Modal(document.getElementById('chatgptModal'), {
            keyboard: false
        });
        chatgpt.show();
    }

    $(document).ready(function () {
        // Enviar o título profissional via AJAX quando o botão "Gerar" for clicado
        $('#btnGerar').on('click', function () {
            const titulo = $('#tituloProfissional').val();
            $.ajax({
                url: '/chatgpt',
                method: 'POST',
                contentType: 'application/json',
                data: JSON.stringify({titulo: titulo}),
                success: function (response) {
                    $('#tituloResposta').html(response);
                }
            });
        });

        // Substituir o campo objetivo com a resposta quando o botão "Aceitar" for clicado
        $('#btnAceitar').on('click', function () {
            const resposta = $('#tituloResposta').text();
            $('#objetivo').val(resposta);
            $('#tituloModal').modal('hide');
        });
    });
</script>
</body>
</html>